schema: '2.0'
stages:
  master bias:
    cmd: python python/masterBias.py
    deps:
    - path: python/masterBias.py
      hash: md5
      md5: c776f387be6330ccd310190d5c8fb192
      size: 2361
    - path: python/pipeline.py
      hash: md5
      md5: 49021e8b1acd5b725e9384a85061434c
      size: 5692
    params:
      params.yaml:
        rawBiasImage.outputpath: Data/ProcessedData/MasterBias/20230504_09d946f1079f6dd4aa95_MasterBias.fits
        rawBiasImage.path:
        - Data/RawData/CalibrationImages/Bias/20230504T135640_BBBBB_H_0000.fits
        - Data/RawData/CalibrationImages/Bias/20230504T135642_BBBBB_H_0000.fits
        - Data/RawData/CalibrationImages/Bias/20230504T135644_BBBBB_H_0000.fits
        - Data/RawData/CalibrationImages/Bias/20230504T135648_BBBBB_H_0000.fits
        - Data/RawData/CalibrationImages/Bias/20230504T135652_BBBBB_H_0000.fits
    outs:
    - path: Data/ProcessedData/MasterBias/20230504_09d946f1079f6dd4aa95_MasterBias.fits
      hash: md5
      md5: abb531823622f0f6f6bbd25865bc9808
      size: 892111680
  master flat:
    cmd: python python/masterFlat.py
    deps:
    - path: Data/ProcessedData/MasterBias
      hash: md5
      md5: 92632a9462f7af3bf9a34a64e1e29e92.dir
      size: 2899365120
      nfiles: 4
    - path: python/masterFlat.py
      hash: md5
      md5: 66ff0b1931eea9697ff32861b433e1f9
      size: 2878
    - path: python/pipeline.py
      hash: md5
      md5: 49021e8b1acd5b725e9384a85061434c
      size: 5692
    params:
      params.yaml:
        rawBiasImage.outputpath: Data/ProcessedData/MasterBias/20230504_09d946f1079f6dd4aa95_MasterBias.fits
        rawFlatImage.outputpath: Data/ProcessedData/MasterFlat/20230504_379062eeaa8df249a07b_MasterFlat.fits
        rawFlatImage.path:
        - Data/RawData/CalibrationImages/Flat/20230504T142007_FFFFF_H_0001.fits
        - Data/RawData/CalibrationImages/Flat/20230504T142402_FFFFF_H_0001.fits
        - Data/RawData/CalibrationImages/Flat/20230504T142759_FFFFF_H_0001.fits
        - Data/RawData/CalibrationImages/Flat/20230504T143157_FFFFF_H_0001.fits
        - Data/RawData/CalibrationImages/Flat/20230504T143554_FFFFF_H_0001.fits
    outs:
    - path: Data/ProcessedData/MasterFlat/20230504_379062eeaa8df249a07b_MasterFlat.fits
      hash: md5
      md5: 6c1da658ab0512c1cac7d97b208e2ed2
      size: 892111680
  bias subtraction:
    cmd: python python/biasCorrectedScienceImage.py
    deps:
    - path: Data/ProcessedData/MasterBias
      hash: md5
      md5: 92632a9462f7af3bf9a34a64e1e29e92.dir
      size: 2899365120
      nfiles: 4
    params:
      params.yaml:
        rawBiasImage.outputpath: Data/ProcessedData/MasterBias/20230504_09d946f1079f6dd4aa95_MasterBias.fits
        rawScienceImage.outputpath:
        - Data/ProcessedData/BiasSubtractedScience/20230614T185728/20230614T185728_4b28df6be44a312af545_ESSSS_bias_subtracted_science.fits
        rawScienceImage.path:
        - Data/RawData/ScienceFrames/20230614T185728_ESSSS_H_0600.fits
  2D mask determination:
    cmd: ./pipeline/target/release/2dmaskdetermination
    deps:
    - path: Data/ProcessedData/MasterFlat
      hash: md5
      md5: 8204e32cdbd895dbea299a2b3ff71845.dir
      size: 4906618560
      nfiles: 7
    params:
      params.yaml:
        orderImage.maskOutputpath: 
          Data/ProcessedData/ExtractedOrders/Mask/20230504_76780edb12aae396101a_2d_mask.fits
        rawFlatImage.outputpath: Data/ProcessedData/MasterFlat/20230504_379062eeaa8df249a07b_MasterFlat.fits
    outs:
    - path: 
        Data/ProcessedData/ExtractedOrders/Mask/20230504_76780edb12aae396101a_2d_mask.fits
      hash: md5
      md5: 485f41702cc13d388e22087fc7437938
      size: 20917440
  2D order extraction:
    cmd: ./pipeline/target/release/2dorderextraction
    deps:
    - path: Data/ProcessedData/BiasSubtractedScience
      hash: md5
      md5: a91ae6e4c05be8af8d86a0f8173f1b96.dir
      size: 892111680
      nfiles: 1
    - path: Data/ProcessedData/ExtractedOrders/Mask
      hash: md5
      md5: 56f38b5644d15971bd2f8c58174dde28.dir
      size: 285782400
      nfiles: 4
    params:
      params.yaml:
        orderImage.maskOutputpath: 
          Data/ProcessedData/ExtractedOrders/Mask/20230504_76780edb12aae396101a_2d_mask.fits
        rawScienceImage.outputpath:
        - Data/ProcessedData/BiasSubtractedScience/20230614T185728/20230614T185728_4b28df6be44a312af545_ESSSS_bias_subtracted_science.fits
  1D flat-relative order extraction:
    cmd: ./pipeline/target/release/1dflatrelativeorderextraction
    deps:
    - path: Data/ProcessedData/ExtractedOrders/Mask
      hash: md5
      md5: 56f38b5644d15971bd2f8c58174dde28.dir
      size: 285782400
      nfiles: 4
    - path: Data/ProcessedData/ExtractedOrders/Science
      hash: md5
      md5: e42075d42d11371db56b9d8046c8864e.dir
      size: 223030080
      nfiles: 1
    params:
      params.yaml:
        orderImage.maskOutputpath: 
          Data/ProcessedData/ExtractedOrders/Mask/20230504_76780edb12aae396101a_2d_mask.fits
        orderImage.scienceOutputpath:
        - Data/ProcessedData/ExtractedOrders/Science/20230614T185728/20230614T185728_9b3d401a7d8076c9f68c_ESSSS_2d_science_orders.fits
